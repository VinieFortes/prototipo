"use strict";(globalThis["webpackChunkprototipo"]=globalThis["webpackChunkprototipo"]||[]).push([[898],{5898:(e,l,t)=>{t.r(l),t.d(l,{default:()=>A});var o=t(9835),a=t(6970);const n=(0,o._)("span",{style:{"font-size":"18px","font-weight":"700"}},"App de Gerenciamento",-1),s={class:"self-center no-outline",tabindex:"0"};function i(e,l,t,i,r,c){const u=(0,o.up)("q-card-section"),d=(0,o.up)("q-btn"),h=(0,o.up)("q-file"),w=(0,o.up)("q-table"),m=(0,o.up)("q-field"),p=(0,o.up)("q-card");return(0,o.wg)(),(0,o.j4)(p,{class:"card q-ma-md bg-blue flex justify-center text-white"},{default:(0,o.w5)((()=>[(0,o.Wm)(u,null,{default:(0,o.w5)((()=>[(0,o.Wm)(p,{class:"bg-white text-grey-8"},{default:(0,o.w5)((()=>[(0,o.Wm)(u,null,{default:(0,o.w5)((()=>[n])),_:1}),(0,o.Wm)(u,null,{default:(0,o.w5)((()=>[(0,o.Wm)(h,{modelValue:r.xslxFile,"onUpdate:modelValue":l[0]||(l[0]=e=>r.xslxFile=e),label:"Selecione o arquivo .xlsx",filled:"",style:{"min-width":"300px"}},(0,o.Nv)({_:2},[r.xslxFile?{name:"after",fn:(0,o.w5)((()=>[(0,o.Wm)(d,{color:"primary",dense:"",icon:"cloud_upload",round:"",onClick:c.onFileChange,disable:!r.xslxFile},null,8,["onClick","disable"])])),key:"0"}:void 0]),1032,["modelValue"])])),_:1}),r.showTable?((0,o.wg)(),(0,o.j4)(u,{key:0},{default:(0,o.w5)((()=>[r.jsonFromServeFile?((0,o.wg)(),(0,o.j4)(d,{key:0,class:"q-mb-sm",icon:"download",onClick:l[1]||(l[1]=e=>c.downloadXLSX(r.jsonFromServeFile)),label:"Baixar .xlsx gerado"})):((0,o.wg)(),(0,o.j4)(d,{key:1,onClick:c.runSeverUpload,class:"q-mb-sm",icon:"play_arrow",label:"Executar"},null,8,["onClick"])),(0,o.Wm)(w,{style:{"max-width":"800px"},rows:r.rows,title:"Formato tabela",columns:r.columns,"row-key":"name"},null,8,["rows","columns"]),r.showTable?((0,o.wg)(),(0,o.j4)(w,{key:2,style:{"max-width":"800px"},rows:r.rows,grid:"",class:"q-mt-md",title:"Formato cards",columns:r.columns,"row-key":"name"},null,8,["rows","columns"])):(0,o.kq)("",!0),r.showTable?((0,o.wg)(),(0,o.j4)(m,{key:3,label:"Formato JSON",style:{"max-width":"800px"},class:"q-mt-md","stack-label":""},{control:(0,o.w5)((()=>[(0,o._)("div",s,(0,a.zw)(r.xslxJson),1)])),_:1})):(0,o.kq)("",!0)])),_:1})):(0,o.kq)("",!0)])),_:1})])),_:1})])),_:1})}t(9665);var r=t(1708),c=t(9981),u=t.n(c);const d=t(4701),h={name:"App1",methods:{convertTabletoJson(e){const l=[];for(let t=1;t<e.length;t++)l.push({id:"LOTE"===e[0][0]?e[t][0]:null,yellowSubBatch:{id:"AMARELO"===e[0][4]?e[t][4]:null,avgWeight:"PESO MEDIO AMARELO"===e[0][6]?e[t][6]:null,type:1,quantity:"QUANTIDADE AMARELO"===e[0][5]?e[t][5]:null},greenSubBatch:{id:"VERDE"===e[0][1]?e[t][1]:null,avgWeight:"PESO MEDIO VERDE"===e[0][3]?e[t][3]:null,type:1,quantity:"QUANTIDADE VERDE"===e[0][2]?e[t][2]:null}});this.xslxJson=l},convertJsonToTable(e){const l=[];for(let t=0;t<e.length;t++)l.push({LOTE:e[t].id,AMARELO:e[t].yellowSubBatch.id,"QUANTIDADE AMARELO":e[t].yellowSubBatch.quantity,"PESO MEDIO AMARELO":e[t].yellowSubBatch.avgWeight,VERDE:e[t].greenSubBatch.id,"QUANTIDADE VERDE":e[t].greenSubBatch.quantity,"PESO MEDIO VERDE":e[t].greenSubBatch.avgWeight,DIFERENCA:e[t].quantityDiff,"DIFERENCA PESO":e[t].weightDiff});return console.log(l),l},downloadXLSX(e){const l=d.utils.json_to_sheet(this.convertJsonToTable(e)),t=d.utils.book_new();d.utils.book_append_sheet(t,l,"Tabela Gerada"),d.writeFile(t,"tabela_gerada.xlsx")},createTable(e){let l={};e[0].forEach((e=>{this.columns.push({name:e,required:!0,label:e,align:"left",field:e,sortable:!0})}));for(let t=1;t<e.length;t++)e[t].forEach(((e,t)=>{l[this.columns[t].name]=e})),this.rows.push(l),l={};this.showTable=!0},runSeverUpload(){return new Promise((()=>{this.$axios.post("https://cors-anywhere.herokuapp.com/https://4kpw53thkri4yk3p4lcdclcnxq0achir.lambda-url.us-east-1.on.aws/gripenew/optimize",this.xslxJson,{headers:{"access-control-allow-origin":"*","content-type":"application/json; charset=utf-8","x-amzn-requestid":"4cd1822c-1c8b-4530-8df5-9b7a6f5eed33","x-amzn-trace-id":"root=1-634f49e4-3c9877944d04a1553205db4f;sampled=0","x-final-url":"https://4kpw53thkri4yk3p4lcdclcnxq0achir.lambda-url.us-east-1.on.aws/gripenew/optimize"}}).then((e=>{this.jsonFromServeFile=e.data,console.log(this.jsonFromServeFile)}))}))},onFileChange(){(0,r.Z)(this.xslxFile).then((e=>{this.createTable(e),this.convertTabletoJson(e)}))}},data(){const e=null,l=[],t=!1,o=[],a=null,n=null;return{xslxFile:e,columns:l,rows:o,showTable:t,xslxJson:a,jsonFromServeFile:n,axiosInstace:u().create({baseURL:"https://4kpw53thkri4yk3p4lcdclcnxq0achir.lambda-url.us-east-1.on.aws/",headers:{"Access-Control-Allow-Origin":"*"}})}}};var w=t(1639),m=t(4458),p=t(3190),b=t(2427),x=t(9379),g=t(3378),E=t(8149),f=t(9984),k=t.n(f);const y=(0,w.Z)(h,[["render",i]]),A=y;k()(h,"components",{QCard:m.Z,QCardSection:p.Z,QFile:b.Z,QBtn:x.Z,QTable:g.Z,QField:E.Z})}}]);